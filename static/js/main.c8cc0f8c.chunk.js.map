{"version":3,"sources":["Components/Link.tsx","Hooks/useStoringReducer.ts","Store/actions.ts","Theory/notes.ts","Theory/chords.ts","Theory/chords.guitar.ts","Theory/keys.ts","Store/selectors.ts","Pages/NotFoundPage/Components/NotFoundPage.tsx","Pages/NotFoundPage/NotFoundPageContainer.tsx","Components/PageHeader.tsx","Hooks/useSortable.ts","Components/FormattedNoteName.tsx","Components/FormattedChord.tsx","Pages/ChordSetPage/Components/ChordDefinition.tsx","Components/FormattedNote.tsx","Theory/tunings.guitar.ts","Pages/ChordSetPage/Components/StringChord.tsx","Pages/ChordSetPage/Components/ChordCard.tsx","Pages/ChordSetPage/Components/EmptyChordCard.tsx","Pages/ChordSetPage/Components/ChordCardCollection.tsx","Pages/ChordSetPage/Components/ChordSelector.tsx","Components/FormattedKey.tsx","Components/PageHeading.tsx","Pages/ChordSetPage/Components/DetailsBox.tsx","Pages/ChordSetPage/Components/EditButton.tsx","Pages/ChordSetPage/Components/KeySelector.tsx","Pages/ChordSetPage/Components/ChordSetPage.tsx","Pages/ChordSetPage/ChordSetPageContainer.tsx","Pages/ChordSetsPage/Components/ChordBadge.tsx","Pages/ChordSetsPage/Components/EmptyChordBadge.tsx","Pages/ChordSetsPage/Components/ChordSetCard.tsx","Pages/ChordSetsPage/Components/EmptyChordSetCard.tsx","Pages/ChordSetsPage/Components/ChordSetCardCollection.tsx","Pages/ChordSetsPage/Components/ChordSetsPage.tsx","Pages/ChordSetsPage/ChordSetsPageContainer.tsx","Store/migrations.ts","Store/reducer.ts","theme.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["StyledLink","styled","ReactRouterLink","Link","props","useStoringReducer","key","reducer","migrateState","initialState","initializer","storingReducer","useMemo","writeTimeoutRef","state","action","newState","window","clearTimeout","setTimeout","localStorage","setItem","JSON","stringify","console","log","version","error","createStoringReducer","readState","rawState","getItem","parse","readStoredState","migratedState","useReducer","undefined","addChordSet","type","moveChordSet","chordSetToMoveIndex","targetChordSetIndex","removeChordSet","chordSetToRemoveIndex","setChordSetName","chordSetIndex","newName","setChordSetDescription","newDescription","setChordSetKey","newKey","addChordToSet","chordToAdd","moveChordInSet","chordToMoveIndex","targetChordIndex","removeChordFromSet","chordToRemove","noteNames","notePattern","getNoteParts","note","exec","noteName","octave","Number","parseInt","transposeNoteName","interval","index","indexOf","chordDefinitions","maj6","dom7","maj7","aug","aug7","min","min6","min7","dim","dim7","chordNamePattern","getChordNameParts","chordName","getChordNameFromParts","rootNoteName","chordModifier","transposeChord","transposedNoteName","getEBarreShapeDefinition","chord","positions","mutedStrings","getEMinBarreShapeDefinition","getABarreShapeDefinition","getAMinBarreShapeDefinition","chords","guitar","guitalele","keyDefinitions","keyNamePattern","getKeyNameParts","keyName","getKeyNameFromParts","keyModifier","getAllKeys","flatMap","n","Object","keys","map","k","getChordsInKey","keyDefinition","baseInterval","transposedDefinition","i","matchingChordModifiers","entries","filter","d","every","includes","length","matchingChordModifier","getChordSets","chordSets","getChordSet","chordSetId","getFilteredChords","chordSetSelector","chordSet","instrumentName","selectedKey","selectedChords","chordsInKey","filteredChords","c","getSuggestedKeys","chordCount","weight","reduce","acc","pos","sort","a","b","slice","NotFoundPage","Box","align","DocumentMissing","size","Heading","level","textAlign","Paragraph","to","NotFoundPageContainer","PageHeader","children","as","direction","justify","gap","wrap","DRAG_TYPE","useSortable","isDraggingEnabled","ref","onMove","useDrag","item","canDrag","collect","monitor","isDragging","drag","useDrop","accept","hover","indexToMove","targetIndex","current","targetBoundingRect","getBoundingClientRect","targetMiddleX","right","left","hoverClientX","getClientOffset","x","drop","noteNamePattern","FormattedNoteName","getNoteNameParts","noteNameWithoutSharp","sharp","Modifier","span","theme","global","borderSize","small","FormattedChord","ChordDefinition","isEditing","onRemove","chordNotes","getChordNotes","isSmallSize","useContext","ResponsiveContext","Card","pad","horizontal","vertical","background","border","side","color","margin","style","whiteSpace","flex","top","Text","overflow","textOverflow","Collapsible","open","Button","icon","Trash","a11yTitle","onClick","FormattedNote","tunings","PushedFingerBox","gridCellWidth","noteCircleSize","NoteCircleText","NoteBox","isStringMuted","isActive","colors","dark","isVisible","css","disabled","isPushed","getGridArea","startFretId","startStringIndex","endFretId","endStringIndex","start","end","StringChord","instrument","highlightedNote","onHighlightNote","chordsForInstrument","chordDefinition","find","stringPositionsParts","stringPositions","fingerIndex","fretId","stringIdOrInterval","Array","isArray","startStringId","endStringId","getStringPositionsParts","maxFretId","Math","max","tuning","maxStringIndex","strings","_","stringIndex","gridArea","isMuted","frets","fill","isStart","finger","notes","stringNote","stringId","semitoneDistance","getNoteFromParts","sign","floor","abs","transposeNote","isHighlighted","Grid","columns","rows","alignSelf","s","Close","ChordCard","useRef","width","cursor","opacity","CardHeader","CardBody","bottom","EmptyChordCard","onAdd","Stack","interactiveChild","Add","ChordCardCollection","onAddChord","onMoveChord","onRemoveChord","useState","setHighlightedNote","chordToMoveHereIndex","ChordSelector","focusRef","isOpen","setIsOpen","searchString","setSearchString","useCallback","matchingChords","label","value","toLowerCase","handleChange","Select","options","valueKey","labelKey","closeOnChange","placeholder","searchPlaceholder","onOpen","onClose","onSearch","onChange","FormattedKey","PageHeading","DetailsBox","name","description","onSetName","onSetDescription","onIsEditingChange","Keyboard","onEnter","TextInput","plain","event","target","EditButton","Checkmark","Edit","primary","suggestedKeys","matchingKeys","Filter","clear","disabledKey","ChordSetPage","availableKeys","onSetKey","setIsEditing","chordSelectorFocusRef","onEsc","KeySelector","ChordSetPageContainer","dispatch","useParams","dispatchAction","args","useDispatchAction","allKeys","selectors","handleSetName","actions","handleSetDescription","handleSetKey","handleAddChord","handleMoveChord","handleRemoveChord","ChordBadge","EmptyChordBadge","ChordSetCard","isRemoving","setIsRemoving","handleMove","setToMoveHereIndex","EmptyChordSetCard","height","ChordSetCardCollection","onAddChordSet","onMoveChordSet","onRemoveChordSet","ChordSetsPage","ChordSetsPageContainer","handleAddChordSet","handleMoveChordSet","handleRemoveChordSet","migrations","rest","migration","chordSetReducer","newSelectedChords","splice","chordToMove","newChordSets","chordSetToMove","newChordSet","goldColor","aquamarineColor","deepMerge","grommet","black","white","brand","font","family","face","heading","button","radius","card","container","round","elevation","App","Grommet","full","themeMode","Page","kind","Header","PageContent","path","element","Footer","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","basename","DndProvider","backend","HTML5Backend","document","getElementById"],"mappings":"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","file":"static/js/main.c8cc0f8c.chunk.js","sourcesContent":["import type { LinkProps } from 'react-router-dom';\r\nimport { Link as ReactRouterLink } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\n\r\nconst StyledLink = styled(ReactRouterLink)`\r\n  &:link,\r\n  &:visited {\r\n    color: inherit;\r\n    text-decoration-color: inherit;\r\n  }\r\n`;\r\n\r\nconst Link = (props: LinkProps) => <StyledLink {...props} />;\r\n\r\nexport default Link;\r\n","import type { Dispatch, Reducer, ReducerAction, ReducerState } from 'react';\r\nimport { useMemo, useReducer } from 'react';\r\n\r\nexport interface StoredState extends Record<any, any> {\r\n  version?: number;\r\n}\r\n\r\nconst createStoringReducer = <S extends StoredState, A>(\r\n  key: string,\r\n  reducer: Reducer<S, A>,\r\n): Reducer<S, A> => {\r\n  let writeTimeoutRef: number | undefined;\r\n\r\n  const storingReducer: Reducer<S, A> = (state, action) => {\r\n    const newState = reducer(state, action);\r\n\r\n    if (newState !== state) {\r\n      window.clearTimeout(writeTimeoutRef);\r\n\r\n      writeTimeoutRef = window.setTimeout(() => {\r\n        try {\r\n          localStorage.setItem(key, JSON.stringify(newState));\r\n          console.log(\r\n            `Written to local storage (version: ${newState.version})`,\r\n            newState,\r\n          );\r\n        } catch (error) {\r\n          // TODO\r\n          console.error(\"Couldn't write to local storage.\", error);\r\n        }\r\n      }, 100);\r\n    }\r\n\r\n    return newState;\r\n  };\r\n\r\n  return storingReducer;\r\n};\r\n\r\nconst readStoredState = <S extends StoredState>(key: string): S | undefined => {\r\n  try {\r\n    const rawState = localStorage.getItem(key);\r\n    const readState = rawState && JSON.parse(rawState);\r\n    console.log(\r\n      `Read from local storage (version: ${readState?.version})`,\r\n      readState,\r\n    );\r\n    return readState;\r\n  } catch (error) {\r\n    // TODO\r\n    console.error(\"Couldn't read from local storage.\", error);\r\n  }\r\n};\r\n\r\nconst useStoringReducer = <R extends Reducer<any, any>, S extends StoredState>(\r\n  key: string,\r\n  reducer: R,\r\n  migrateState: (readState: StoredState) => S,\r\n  initialState: S,\r\n  initializer?: undefined,\r\n): [ReducerState<R>, Dispatch<ReducerAction<R>>] => {\r\n  const storingReducer = useMemo(\r\n    () => createStoringReducer(key, reducer),\r\n    [key, reducer],\r\n  );\r\n  const readState = useMemo(() => readStoredState(key), [key]);\r\n\r\n  const migratedState = useMemo(\r\n    () => migrateState(readState ?? initialState),\r\n    [migrateState, readState, initialState],\r\n  );\r\n\r\n  return useReducer(\r\n    storingReducer,\r\n    migratedState,\r\n    readState ? undefined : initializer,\r\n  );\r\n};\r\n\r\nexport default useStoringReducer;\r\n","import type { ChordName } from '../Theory/chords';\r\nimport type { KeyName } from '../Theory/keys';\r\n\r\nexport interface AddChordSetAction {\r\n  type: 'addChordSet';\r\n}\r\n\r\nexport const addChordSet = (): AddChordSetAction => ({\r\n  type: 'addChordSet',\r\n});\r\n\r\nexport interface MoveChordSetAction {\r\n  type: 'moveChordSet';\r\n  chordSetToMoveIndex: number;\r\n  targetChordSetIndex: number;\r\n}\r\n\r\nexport const moveChordSet = (\r\n  chordSetToMoveIndex: number,\r\n  targetChordSetIndex: number,\r\n): MoveChordSetAction => ({\r\n  type: 'moveChordSet',\r\n  chordSetToMoveIndex,\r\n  targetChordSetIndex,\r\n});\r\n\r\nexport interface RemoveChordSetAction {\r\n  type: 'removeChordSet';\r\n  chordSetToRemoveIndex: number;\r\n}\r\n\r\nexport const removeChordSet = (\r\n  chordSetToRemoveIndex: number,\r\n): RemoveChordSetAction => ({\r\n  type: 'removeChordSet',\r\n  chordSetToRemoveIndex,\r\n});\r\n\r\nexport interface SetChordSetNameAction {\r\n  type: 'setChordSetName';\r\n  chordSetIndex: number;\r\n  newName: string;\r\n}\r\n\r\nexport const setChordSetName = (\r\n  chordSetIndex: number,\r\n  newName: string,\r\n): SetChordSetNameAction => ({\r\n  type: 'setChordSetName',\r\n  chordSetIndex,\r\n  newName,\r\n});\r\n\r\nexport interface SetChordSetDescriptionAction {\r\n  type: 'setChordSetDescription';\r\n  chordSetIndex: number;\r\n  newDescription: string;\r\n}\r\n\r\nexport const setChordSetDescription = (\r\n  chordSetIndex: number,\r\n  newDescription: string,\r\n): SetChordSetDescriptionAction => ({\r\n  type: 'setChordSetDescription',\r\n  chordSetIndex,\r\n  newDescription,\r\n});\r\n\r\nexport interface SetChordSetKeyAction {\r\n  type: 'setChordSetKey';\r\n  chordSetIndex: number;\r\n  newKey?: KeyName;\r\n}\r\n\r\nexport const setChordSetKey = (\r\n  chordSetIndex: number,\r\n  newKey?: KeyName,\r\n): SetChordSetKeyAction => ({\r\n  type: 'setChordSetKey',\r\n  chordSetIndex,\r\n  newKey,\r\n});\r\n\r\nexport interface AddChordToSetAction {\r\n  type: 'addChordToSet';\r\n  chordSetIndex: number;\r\n  chordToAdd: ChordName;\r\n}\r\n\r\nexport const addChordToSet = (\r\n  chordSetIndex: number,\r\n  chordToAdd: ChordName,\r\n): AddChordToSetAction => ({\r\n  type: 'addChordToSet',\r\n  chordSetIndex,\r\n  chordToAdd,\r\n});\r\n\r\nexport interface MoveChordInSetAction {\r\n  type: 'moveChordInSet';\r\n  chordSetIndex: number;\r\n  chordToMoveIndex: number;\r\n  targetChordIndex: number;\r\n}\r\n\r\nexport const moveChordInSet = (\r\n  chordSetIndex: number,\r\n  chordToMoveIndex: number,\r\n  targetChordIndex: number,\r\n): MoveChordInSetAction => ({\r\n  type: 'moveChordInSet',\r\n  chordSetIndex,\r\n  chordToMoveIndex,\r\n  targetChordIndex,\r\n});\r\n\r\nexport interface RemoveChordFromSetAction {\r\n  type: 'removeChordFromSet';\r\n  chordSetIndex: number;\r\n  chordToRemove: ChordName;\r\n}\r\n\r\nexport const removeChordFromSet = (\r\n  chordSetIndex: number,\r\n  chordToRemove: ChordName,\r\n): RemoveChordFromSetAction => ({\r\n  type: 'removeChordFromSet',\r\n  chordSetIndex,\r\n  chordToRemove,\r\n});\r\n\r\nexport type Action =\r\n  | AddChordSetAction\r\n  | MoveChordSetAction\r\n  | RemoveChordSetAction\r\n  | SetChordSetNameAction\r\n  | SetChordSetDescriptionAction\r\n  | SetChordSetKeyAction\r\n  | AddChordToSetAction\r\n  | MoveChordInSetAction\r\n  | RemoveChordFromSetAction;\r\n","export type NoteName =\r\n  | 'C'\r\n  | 'C#'\r\n  | 'D'\r\n  | 'D#'\r\n  | 'E'\r\n  | 'F'\r\n  | 'F#'\r\n  | 'G'\r\n  | 'G#'\r\n  | 'A'\r\n  | 'A#'\r\n  | 'B';\r\n\r\nexport type Octave = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9;\r\n\r\nexport type Note = `${NoteName}${Octave}`;\r\n\r\nexport const noteNames: NoteName[] = [\r\n  'C',\r\n  'C#',\r\n  'D',\r\n  'D#',\r\n  'E',\r\n  'F',\r\n  'F#',\r\n  'G',\r\n  'G#',\r\n  'A',\r\n  'A#',\r\n  'B',\r\n];\r\n\r\n// https://en.wikipedia.org/wiki/Interval_(music)#Main_intervals\r\nexport type IntervalPerfectUnison = 0;\r\nexport type IntervalMinorSecond = 1;\r\nexport type IntervalMajorSecond = 2;\r\nexport type IntervalMinorThird = 3;\r\nexport type IntervalMajorThird = 4;\r\nexport type IntervalPerfectFourth = 5;\r\nexport type IntervalAugmentedFourth = 6;\r\nexport type IntervalDiminishedFifth = 6;\r\nexport type IntervalPerfectFifth = 7;\r\nexport type IntervalMinorSixth = 8;\r\nexport type IntervalMajorSixth = 9;\r\nexport type IntervalMinorSeventh = 10;\r\nexport type IntervalMajorSeventh = 11;\r\nexport type IntervalPerfectOctave = 12;\r\n\r\nexport type Interval =\r\n  | IntervalPerfectUnison\r\n  | IntervalMinorSecond\r\n  | IntervalMajorSecond\r\n  | IntervalMinorThird\r\n  | IntervalMajorThird\r\n  | IntervalPerfectFourth\r\n  | IntervalAugmentedFourth\r\n  | IntervalDiminishedFifth\r\n  | IntervalPerfectFifth\r\n  | IntervalMinorSixth\r\n  | IntervalMajorSixth\r\n  | IntervalMinorSeventh\r\n  | IntervalMajorSeventh;\r\n\r\nexport type IntervalWithPerfectOctave = Interval | IntervalPerfectOctave;\r\n\r\nconst notePattern = /^\\s*([A-G]#?)(\\d)\\s*$/;\r\n\r\nexport const getNoteParts = (note: Note): [NoteName, Octave] => {\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  const [_, noteName, octave] = notePattern.exec(note) ?? [];\r\n  return [noteName as NoteName, Number.parseInt(octave) as Octave];\r\n};\r\n\r\nconst getNoteFromParts = (noteName: NoteName, octave: Octave): Note =>\r\n  `${noteName}${octave}` as Note;\r\n\r\nexport const transposeNoteName = (\r\n  noteName: NoteName,\r\n  interval: IntervalWithPerfectOctave,\r\n) => {\r\n  const index = noteNames.indexOf(noteName);\r\n  const transposedIndex = (index + interval) % 12;\r\n  return noteNames[transposedIndex];\r\n};\r\n\r\nexport const transposeNote = (note: Note, semitoneDistance: number) => {\r\n  const [noteName, octave] = getNoteParts(note);\r\n  const transposedNoteName = transposeNoteName(\r\n    noteName,\r\n    (semitoneDistance % 12) as Interval,\r\n  );\r\n  const octaveDistance =\r\n    Math.sign(semitoneDistance) * Math.floor(Math.abs(semitoneDistance) / 12);\r\n  return getNoteFromParts(\r\n    transposedNoteName,\r\n    (octave + octaveDistance) as Octave,\r\n  );\r\n};\r\n","import type { Interval, IntervalWithPerfectOctave, NoteName } from './notes';\r\nimport { transposeNoteName } from './notes';\r\n\r\nexport type ChordModifier =\r\n  | ''\r\n  | 'maj6'\r\n  | 'dom7'\r\n  | 'maj7'\r\n  | 'aug'\r\n  | 'aug7'\r\n  | 'min'\r\n  | 'min6'\r\n  | 'min7'\r\n  | 'dim'\r\n  | 'dim7'; // ...more\r\n\r\nexport type ChordName = `${NoteName}${ChordModifier}`;\r\n\r\nexport type ChordDefinition = Interval[];\r\n\r\n// https://en.wikipedia.org/wiki/Chord_(music)#Examples\r\nexport const chordDefinitions: Record<ChordModifier, ChordDefinition> = {\r\n  '': [0, 4, 7], // major\r\n  maj6: [0, 4, 7, 9], // major 6th\r\n  dom7: [0, 4, 7, 10], // dominant 7th\r\n  maj7: [0, 4, 7, 11], // major 7th\r\n\r\n  aug: [0, 4, 8], // augmented\r\n  aug7: [0, 4, 8, 10], //augmented 7th\r\n\r\n  min: [0, 3, 7], // minor\r\n  min6: [0, 3, 7, 9], // minor 6th\r\n  min7: [0, 3, 7, 10], // minor 7th\r\n\r\n  dim: [0, 3, 6], // diminished\r\n  dim7: [0, 3, 6, 9], // diminished 7th\r\n};\r\n\r\nconst chordNamePattern =\r\n  /^\\s*([A-G]#?)(|maj6|dom7|maj7|aug|aug7|min|min6|min7)\\s*$/;\r\n\r\nexport const getChordNameParts = (\r\n  chordName: ChordName,\r\n): [NoteName, ChordModifier] => {\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  const [_, rootNoteName, chordModifier] =\r\n    chordNamePattern.exec(chordName) ?? [];\r\n  return [rootNoteName as NoteName, chordModifier as ChordModifier];\r\n};\r\n\r\nexport const getChordNameFromParts = (\r\n  rootNoteName: NoteName,\r\n  chordModifier: ChordModifier,\r\n): ChordName => `${rootNoteName}${chordModifier}` as ChordName;\r\n\r\nexport const getChordNotes = (chordName: ChordName): NoteName[] => {\r\n  const [rootNoteName, chordModifier] = getChordNameParts(chordName);\r\n  const chordDefinition = chordDefinitions[chordModifier];\r\n  return chordDefinition.map((x) => transposeNoteName(rootNoteName, x));\r\n};\r\n\r\nexport const transposeChord = (\r\n  chordName: ChordName,\r\n  interval: IntervalWithPerfectOctave,\r\n): ChordName => {\r\n  const [rootNoteName, chordModifier] = getChordNameParts(chordName);\r\n  const transposedNoteName = transposeNoteName(rootNoteName, interval);\r\n  return getChordNameFromParts(transposedNoteName, chordModifier);\r\n};\r\n","import type { ChordName } from './chords';\r\nimport { transposeChord } from './chords';\r\nimport type { IntervalPerfectUnison, IntervalWithPerfectOctave } from './notes';\r\nimport type { InstrumentName } from './tunings.guitar';\r\n\r\nexport type ChordType = 'simple' | 'barre';\r\n\r\n/**\r\n * 1 = lowest string, 6 = highest string.\r\n */\r\nexport type StringId = 1 | 2 | 3 | 4 | 5 | 6;\r\n\r\ntype StringInterval = [\r\n  /** From string (inclusive) */\r\n  StringId,\r\n  /** To string (inclusive) */\r\n  StringId,\r\n];\r\n\r\nexport type FretId =\r\n  | 1\r\n  | 2\r\n  | 3\r\n  | 4\r\n  | 5\r\n  | 6\r\n  | 7\r\n  | 8\r\n  | 9\r\n  | 10\r\n  | 11\r\n  | 12\r\n  | 13\r\n  | 14\r\n  | 15\r\n  | 16\r\n  | 17\r\n  | 18\r\n  | 19;\r\n\r\ntype StringPosition = [FretId, StringId | StringInterval];\r\n\r\n/**\r\n * String and fret position (or null for unused), per finger (index -> pinky).\r\n */\r\ntype StringPositions = [\r\n  /** Index finger */\r\n  StringPosition | null,\r\n  /** Middle finger */\r\n  StringPosition | null,\r\n  /** Ring finger */\r\n  StringPosition | null,\r\n  /** Pinky finger */\r\n  StringPosition | null,\r\n];\r\n\r\nexport interface ChordDefinition {\r\n  chord: ChordName;\r\n  type: ChordType;\r\n  positions: StringPositions;\r\n  mutedStrings: StringId[];\r\n}\r\n\r\nconst getEBarreShapeDefinition = (\r\n  interval: Exclude<IntervalWithPerfectOctave, IntervalPerfectUnison>,\r\n): ChordDefinition => ({\r\n  chord: transposeChord('E', interval),\r\n  type: 'barre',\r\n  positions: [\r\n    [interval, [1, 6]],\r\n    [(interval + 1) as FretId, 4],\r\n    [(interval + 2) as FretId, 2],\r\n    [(interval + 2) as FretId, 3],\r\n  ],\r\n  mutedStrings: [],\r\n});\r\n\r\nconst getEMinBarreShapeDefinition = (\r\n  interval: Exclude<IntervalWithPerfectOctave, IntervalPerfectUnison>,\r\n): ChordDefinition => ({\r\n  chord: transposeChord('Emin', interval),\r\n  type: 'barre',\r\n  positions: [\r\n    [interval, [1, 6]],\r\n    null,\r\n    [(interval + 2) as FretId, 2],\r\n    [(interval + 2) as FretId, 3],\r\n  ],\r\n  mutedStrings: [],\r\n});\r\n\r\nconst getABarreShapeDefinition = (\r\n  interval: Exclude<IntervalWithPerfectOctave, IntervalPerfectUnison>,\r\n): ChordDefinition => ({\r\n  chord: transposeChord('A', interval),\r\n  type: 'barre',\r\n  positions: [\r\n    [interval, [2, 6]],\r\n    [(interval + 2) as FretId, 3],\r\n    [(interval + 2) as FretId, 4],\r\n    [(interval + 2) as FretId, 5],\r\n  ],\r\n  mutedStrings: [1],\r\n});\r\n\r\nconst getAMinBarreShapeDefinition = (\r\n  interval: Exclude<IntervalWithPerfectOctave, IntervalPerfectUnison>,\r\n): ChordDefinition => ({\r\n  chord: transposeChord('Amin', interval),\r\n  type: 'barre',\r\n  positions: [\r\n    [interval, [2, 6]],\r\n    [(interval + 1) as FretId, 5],\r\n    [(interval + 2) as FretId, 3],\r\n    [(interval + 2) as FretId, 4],\r\n  ],\r\n  mutedStrings: [1],\r\n});\r\n\r\nexport const chords: Record<InstrumentName, ChordDefinition[]> = {\r\n  guitar: [\r\n    {\r\n      chord: 'C',\r\n      type: 'simple',\r\n      positions: [[1, 5], [2, 3], [3, 2], null],\r\n      mutedStrings: [1],\r\n    },\r\n    // { chord: 'Cmin', type: '', positions: [], mutedStrings: [] },\r\n    {\r\n      chord: 'D',\r\n      type: 'simple',\r\n      positions: [[2, 4], [2, 6], [3, 5], null],\r\n      mutedStrings: [1, 2],\r\n    },\r\n    {\r\n      chord: 'Dmin',\r\n      type: 'simple',\r\n      positions: [[1, 6], [2, 4], [3, 5], null],\r\n      mutedStrings: [1, 2],\r\n    },\r\n    // { chord: 'D#', type: '', positions: [], mutedStrings: [] },\r\n    {\r\n      chord: 'D#min',\r\n      type: 'simple',\r\n      positions: [\r\n        [1, 3],\r\n        [2, 6],\r\n        [3, 4],\r\n        [4, 5],\r\n      ],\r\n      mutedStrings: [1, 2],\r\n    },\r\n    {\r\n      chord: 'E',\r\n      type: 'simple',\r\n      positions: [[1, 4], [2, 2], [2, 3], null],\r\n      mutedStrings: [],\r\n    },\r\n    {\r\n      chord: 'Emin',\r\n      type: 'simple',\r\n      positions: [null, [2, 2], [2, 3], null],\r\n      mutedStrings: [],\r\n    },\r\n    getEBarreShapeDefinition(1), // F\r\n    getEMinBarreShapeDefinition(1), // Fmin\r\n    getEBarreShapeDefinition(2), // F#\r\n    getEMinBarreShapeDefinition(2), // F#min\r\n    {\r\n      chord: 'G',\r\n      type: 'simple',\r\n      positions: [[2, 2], [3, 1], [3, 6], null],\r\n      mutedStrings: [],\r\n    },\r\n    getEMinBarreShapeDefinition(3), // Gmin\r\n    getEBarreShapeDefinition(4), // G#\r\n    getEMinBarreShapeDefinition(4), // G#min\r\n    {\r\n      chord: 'A',\r\n      type: 'simple',\r\n      positions: [[2, 3], [2, 4], [2, 5], null],\r\n      mutedStrings: [1],\r\n    },\r\n    {\r\n      chord: 'Amin',\r\n      type: 'simple',\r\n      positions: [[1, 5], [2, 3], [2, 4], null],\r\n      mutedStrings: [1],\r\n    },\r\n    getABarreShapeDefinition(1), // A#\r\n    getAMinBarreShapeDefinition(1), // A#min\r\n    getABarreShapeDefinition(2), // B\r\n    getAMinBarreShapeDefinition(2), // Bmin\r\n  ],\r\n  guitalele: [],\r\n};\r\n\r\nexport const getAvailableChords = (instrumentName: InstrumentName) =>\r\n  chords[instrumentName].map((c) => c.chord);\r\n\r\nexport const getStringPositionsParts = (stringPositions: StringPositions) =>\r\n  stringPositions\r\n    .map((pos, fingerIndex) => ({ pos, fingerIndex }))\r\n    .filter(\r\n      (x): x is { pos: StringPosition; fingerIndex: number } => x.pos != null,\r\n    )\r\n    .map(({ pos, fingerIndex }) => {\r\n      const [fretId, stringIdOrInterval] = pos;\r\n      const [startStringId, endStringId] = Array.isArray(stringIdOrInterval)\r\n        ? stringIdOrInterval\r\n        : [stringIdOrInterval, stringIdOrInterval];\r\n\r\n      return {\r\n        fretId,\r\n        startStringId,\r\n        endStringId,\r\n        fingerIndex,\r\n      };\r\n    });\r\n\r\nexport default chords;\r\n","import type { ChordDefinition, ChordModifier, ChordName } from './chords';\r\nimport { chordDefinitions, getChordNameFromParts } from './chords';\r\nimport type { Interval, IntervalWithPerfectOctave, NoteName } from './notes';\r\nimport { noteNames, transposeNoteName } from './notes';\r\n\r\nexport type KeyModifier = '' | 'min'; // ...more\r\n\r\nexport type KeyName = `${NoteName}${KeyModifier}`;\r\n\r\nexport type KeyDefinition = Interval[];\r\n\r\nconst keyDefinitions: Record<KeyModifier, KeyDefinition> = {\r\n  '': [0, 2, 4, 5, 7, 9, 11], // major\r\n  min: [0, 2, 3, 5, 7, 8, 10], // minor\r\n};\r\n\r\nconst keyNamePattern = /^\\s*([A-G]#?)(|min)\\s*$/;\r\n\r\nexport const getKeyNameParts = (keyName: KeyName): [NoteName, KeyModifier] => {\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  const [_, rootNoteName, keyModifier] = keyNamePattern.exec(keyName) ?? [];\r\n  return [rootNoteName as NoteName, keyModifier as KeyModifier];\r\n};\r\n\r\nconst getKeyNameFromParts = (\r\n  rootNoteName: NoteName,\r\n  keyModifier: KeyModifier,\r\n): KeyName => `${rootNoteName}${keyModifier}` as KeyName;\r\n\r\nexport const getAllKeys = (): KeyName[] =>\r\n  noteNames.flatMap((n) =>\r\n    (Object.keys(keyDefinitions) as KeyModifier[]).map((k) =>\r\n      getKeyNameFromParts(n, k),\r\n    ),\r\n  );\r\n\r\nexport const getKeyNotes = (keyName: KeyName): NoteName[] => {\r\n  const [rootNoteName, keyModifier] = getKeyNameParts(keyName);\r\n  const chordDefinition = keyDefinitions[keyModifier];\r\n  return chordDefinition.map((x) => transposeNoteName(rootNoteName, x));\r\n};\r\n\r\nexport const transposeKey = (\r\n  keyName: KeyName,\r\n  interval: IntervalWithPerfectOctave,\r\n): KeyName => {\r\n  const [rootNoteName, keyModifier] = getKeyNameParts(keyName);\r\n  const transposedNoteName = transposeNoteName(rootNoteName, interval);\r\n  return getKeyNameFromParts(transposedNoteName, keyModifier);\r\n};\r\n\r\nexport const getChordsInKey = (keyName: KeyName): ChordName[] => {\r\n  const [rootNoteName, keyModifier] = getKeyNameParts(keyName);\r\n\r\n  const keyDefinition = keyDefinitions[keyModifier];\r\n\r\n  return keyDefinition.map((baseInterval) => {\r\n    const transposedDefinition = keyDefinition.map(\r\n      (i) => ((i - baseInterval + 12) % 12) as Interval,\r\n    );\r\n\r\n    const matchingChordModifiers = (\r\n      Object.entries(chordDefinitions) as [ChordModifier, ChordDefinition][]\r\n    ).filter(\r\n      ([_, d]) =>\r\n        d.every((i) => transposedDefinition.includes(i)) && d.length === 3,\r\n    );\r\n    if (matchingChordModifiers.length !== 1) {\r\n      console.log(transposedDefinition, matchingChordModifiers);\r\n    }\r\n\r\n    const [matchingChordModifier] = matchingChordModifiers[0] ?? [];\r\n    return getChordNameFromParts(\r\n      transposeNoteName(rootNoteName, baseInterval),\r\n      matchingChordModifier!,\r\n    );\r\n  });\r\n};\r\n\r\nexport const getSuggestedKeysForChords = (\r\n  chords: ChordName[],\r\n): { key: KeyName; chordCount: number; weight: number }[] =>\r\n  getAllKeys()\r\n    .map((key) => {\r\n      const chordsInKey = getChordsInKey(key);\r\n\r\n      const chordCount = chords.filter((c) => chordsInKey.includes(c)).length;\r\n\r\n      const weight = chords\r\n        .map((c) => chordsInKey.indexOf(c))\r\n        .reduce(\r\n          (acc, pos) => (pos !== -1 ? acc + chordsInKey.length - pos : acc),\r\n          0,\r\n        );\r\n\r\n      return { key, chordCount, weight };\r\n    })\r\n    .filter(({ weight }) => weight > 0)\r\n    .sort((a, b) => b.weight - a.weight);\r\n","import { getAvailableChords } from '../Theory/chords.guitar';\r\nimport { getChordsInKey, getSuggestedKeysForChords } from '../Theory/keys';\r\nimport type { ChordSet, State } from './Types/State';\r\n\r\nexport const getChordSets = (state: State) => state.chordSets;\r\n\r\nexport const getChordSet =\r\n  (chordSetId: number) =>\r\n  (state: State): ChordSet | undefined =>\r\n    getChordSets(state)[chordSetId];\r\n\r\nexport const getFilteredChords = (chordSetId: number) => {\r\n  const chordSetSelector = getChordSet(chordSetId);\r\n\r\n  return (state: State) => {\r\n    const chordSet = chordSetSelector(state);\r\n    if (!chordSet) {\r\n      return undefined;\r\n    }\r\n\r\n    const { selectedKey, selectedChords } = chordSet;\r\n    const chordsInKey = selectedKey && getChordsInKey(selectedKey);\r\n\r\n    const filteredChords = getAvailableChords('guitar').filter(\r\n      (c) => selectedChords.indexOf(c) < 0,\r\n    );\r\n\r\n    return chordsInKey\r\n      ? filteredChords.filter((c) => chordsInKey.includes(c))\r\n      : filteredChords;\r\n  };\r\n};\r\n\r\nexport const getSuggestedKeys = (chordSetId: number) => {\r\n  const chordSetSelector = getChordSet(chordSetId);\r\n\r\n  return (state: State) => {\r\n    const chordSet = chordSetSelector(state);\r\n    if (!chordSet) {\r\n      return undefined;\r\n    }\r\n\r\n    return getSuggestedKeysForChords(chordSet.selectedChords)\r\n      .map(({ key }) => key)\r\n      .slice(0, 3);\r\n  };\r\n};\r\n","import { Box, Heading, Paragraph } from 'grommet';\r\nimport { DocumentMissing } from 'grommet-icons';\r\nimport Link from '../../../Components/Link';\r\n\r\nconst NotFoundPage = () => (\r\n  <Box align=\"center\">\r\n    <DocumentMissing size=\"large\" />\r\n    <Heading level={2} textAlign=\"center\">\r\n      Page not found\r\n    </Heading>\r\n    <Paragraph textAlign=\"center\">\r\n      This page doesn't exist. <Link to=\"/\">Go back.</Link>\r\n    </Paragraph>\r\n  </Box>\r\n);\r\n\r\nexport default NotFoundPage;\r\n","import NotFoundPage from './Components/NotFoundPage';\r\n\r\nconst NotFoundPageContainer = () => <NotFoundPage />;\r\n\r\nexport default NotFoundPageContainer;\r\n","import { Box } from 'grommet';\r\nimport { PropsWithChildren } from 'react';\r\n\r\nexport type Props = PropsWithChildren<{}>;\r\n\r\nconst PageHeader = ({ children }: Props) => (\r\n  <Box\r\n    as=\"header\"\r\n    direction=\"row\"\r\n    align=\"start\"\r\n    justify=\"between\"\r\n    gap=\"small\"\r\n    wrap\r\n  >\r\n    {children}\r\n  </Box>\r\n);\r\n\r\nexport default PageHeader;\r\n","import type { RefObject } from 'react';\r\nimport { useDrag, useDrop } from 'react-dnd';\r\n\r\nconst DRAG_TYPE = 'DEFAULT';\r\n\r\nconst useSortable = (\r\n  index: number,\r\n  isDraggingEnabled: boolean,\r\n  ref: RefObject<HTMLElement>,\r\n  onMove?: (toMoveHereIndex: number) => void,\r\n): boolean => {\r\n  const [{ isDragging }, drag] = useDrag({\r\n    type: DRAG_TYPE,\r\n    item: { index },\r\n    canDrag: isDraggingEnabled,\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  });\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  const [_, drop] = useDrop({\r\n    accept: DRAG_TYPE,\r\n    hover: (item: { index: number }, monitor) => {\r\n      const indexToMove = item.index;\r\n      const targetIndex = index;\r\n\r\n      if (indexToMove === targetIndex || !ref.current) {\r\n        return;\r\n      }\r\n\r\n      // Determine rectangle on screen\r\n      const targetBoundingRect = ref.current.getBoundingClientRect();\r\n\r\n      // Get horizontal middle\r\n      const targetMiddleX =\r\n        (targetBoundingRect.right - targetBoundingRect.left) / 2;\r\n\r\n      // Determine mouse position\r\n      const clientOffset = monitor.getClientOffset()!;\r\n\r\n      // Get pixels to the left\r\n      const hoverClientX = clientOffset.x - targetBoundingRect.left;\r\n\r\n      // Only perform the move when the mouse has crossed half of the items height\r\n      // When dragging to the right, only move when the cursor is below 50%\r\n      // When dragging to the left, only move when the cursor is above 50%\r\n\r\n      // Dragging to the right\r\n      if (indexToMove < targetIndex && hoverClientX < targetMiddleX) {\r\n        return;\r\n      }\r\n\r\n      // Dragging to the left\r\n      if (indexToMove > targetIndex && hoverClientX > targetMiddleX) {\r\n        return;\r\n      }\r\n\r\n      onMove?.(indexToMove);\r\n\r\n      // Note: we're mutating the monitor item here!\r\n      // Generally it's better to avoid mutations,\r\n      // but it's good here for the sake of performance\r\n      // to avoid expensive index searches.\r\n      item.index = targetIndex;\r\n    },\r\n  });\r\n\r\n  drag(drop(ref));\r\n\r\n  return isDragging;\r\n};\r\n\r\nexport default useSortable;\r\n","import type { NoteName } from '../Theory/notes';\r\n\r\nconst noteNamePattern = /^\\s*([A-G])(#)?\\s*$/;\r\n\r\nconst getNoteNameParts = (note: NoteName) => {\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  const [_, rootNoteName, sharp] = noteNamePattern.exec(note) ?? [];\r\n  return [rootNoteName, sharp];\r\n};\r\n\r\nexport interface Props {\r\n  note: NoteName | undefined;\r\n}\r\n\r\nconst FormattedNoteName = ({ note }: Props) => {\r\n  const [noteNameWithoutSharp, sharp] = note ? getNoteNameParts(note) : [];\r\n  return (\r\n    <>\r\n      {noteNameWithoutSharp || <>&nbsp;</>}\r\n      <sup>{sharp && '♯'}</sup>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FormattedNoteName;\r\n","import styled from 'styled-components';\r\nimport type { ChordName } from '../Theory/chords';\r\nimport { getChordNameParts } from '../Theory/chords';\r\nimport FormattedNoteName from './FormattedNoteName';\r\n\r\nexport const Modifier = styled.span`\r\n  padding-left: ${({ theme }) => theme.global.borderSize.small};\r\n`;\r\n\r\nexport interface Props {\r\n  chord: ChordName | undefined;\r\n}\r\n\r\nconst FormattedChord = ({ chord }: Props) => {\r\n  const [rootNoteName, chordModifier] = chord ? getChordNameParts(chord) : [];\r\n  return (\r\n    <span>\r\n      <FormattedNoteName note={rootNoteName} />\r\n      {chordModifier && <Modifier>{chordModifier}</Modifier>}\r\n    </span>\r\n  );\r\n};\r\n\r\nexport default FormattedChord;\r\n","import {\r\n  Box,\r\n  Button,\r\n  Card,\r\n  Collapsible,\r\n  Heading,\r\n  ResponsiveContext,\r\n  Text,\r\n} from 'grommet';\r\nimport { Trash } from 'grommet-icons';\r\nimport { Fragment, useContext } from 'react';\r\nimport FormattedChord from '../../../Components/FormattedChord';\r\nimport FormattedNoteName from '../../../Components/FormattedNoteName';\r\nimport type { ChordName } from '../../../Theory/chords';\r\nimport { getChordNotes } from '../../../Theory/chords';\r\n\r\nexport interface Props {\r\n  chord: ChordName | undefined;\r\n  isEditing: boolean;\r\n  onRemove?: () => void;\r\n}\r\n\r\nconst ChordDefinition = ({ chord, isEditing, onRemove }: Props) => {\r\n  const chordNotes = chord ? getChordNotes(chord) : [];\r\n\r\n  const isSmallSize = useContext(ResponsiveContext) === 'small';\r\n\r\n  return (\r\n    <>\r\n      <Card\r\n        pad={{ horizontal: 'medium', vertical: 'small' }}\r\n        background=\"background-front\"\r\n        border={{ side: 'right', color: 'background-contrast' }}\r\n      >\r\n        <Heading\r\n          level={3}\r\n          color=\"accent-1\"\r\n          margin=\"none\"\r\n          style={{ whiteSpace: 'nowrap' }}\r\n        >\r\n          <FormattedChord chord={chord} />\r\n        </Heading>\r\n      </Card>\r\n      <Box\r\n        direction=\"row\"\r\n        pad={{ left: 'small', right: 'xsmall' }}\r\n        gap=\"small\"\r\n        align=\"center\"\r\n        flex=\"shrink\"\r\n      >\r\n        <Box pad={{ top: 'xsmall' }}>\r\n          <Text\r\n            size={isSmallSize ? 'small' : 'medium'}\r\n            style={{\r\n              whiteSpace: 'nowrap',\r\n              overflow: 'hidden',\r\n              textOverflow: 'ellipsis',\r\n            }}\r\n          >\r\n            {chordNotes.map((n, i) => (\r\n              <Fragment key={n}>\r\n                {i !== 0 && ' '}\r\n                <FormattedNoteName note={n} />\r\n              </Fragment>\r\n            ))}\r\n          </Text>\r\n        </Box>\r\n        <Collapsible open={isEditing} direction=\"horizontal\">\r\n          <Button\r\n            icon={<Trash size={isSmallSize ? 'small' : 'medium'} />}\r\n            a11yTitle={`Remove chord ${chord}`}\r\n            onClick={onRemove}\r\n          />\r\n        </Collapsible>\r\n      </Box>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ChordDefinition;\r\n","import type { Note } from '../Theory/notes';\r\nimport { getNoteParts } from '../Theory/notes';\r\nimport FormattedNoteName from './FormattedNoteName';\r\n\r\nexport interface Props {\r\n  note: Note;\r\n}\r\n\r\nconst FormattedNote = ({ note }: Props) => {\r\n  const [noteName, octave] = note ? getNoteParts(note) : [];\r\n  return (\r\n    <span>\r\n      <FormattedNoteName note={noteName} />\r\n      {octave && <sub>{octave}</sub>}\r\n    </span>\r\n  );\r\n};\r\n\r\nexport default FormattedNote;\r\n","import type { Note } from './notes';\r\n\r\nexport type InstrumentName = 'guitar' | 'guitalele';\r\n\r\nexport type Tuning = Note[];\r\n\r\nconst tunings: Record<InstrumentName, Tuning> = {\r\n  guitar: ['E2', 'A2', 'D3', 'G3', 'B3', 'E4'],\r\n  guitalele: ['A2', 'D3', 'G3', 'C4', 'E4', 'A4'],\r\n};\r\n\r\nexport default tunings;\r\n","import { Box, Grid, ResponsiveContext, Text } from 'grommet';\r\nimport { Close } from 'grommet-icons';\r\nimport { useContext } from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport FormattedNote from '../../../Components/FormattedNote';\r\nimport type { ChordName } from '../../../Theory/chords';\r\nimport type { FretId, StringId } from '../../../Theory/chords.guitar';\r\nimport chords, { getStringPositionsParts } from '../../../Theory/chords.guitar';\r\nimport { getNoteParts, NoteName, transposeNote } from '../../../Theory/notes';\r\nimport type { InstrumentName } from '../../../Theory/tunings.guitar';\r\nimport tunings from '../../../Theory/tunings.guitar';\r\n\r\nconst PushedFingerBox = styled(Box)<{\r\n  noteCircleSize: string;\r\n  gridCellWidth: string;\r\n}>`\r\n  width: calc(\r\n    100% - ${({ gridCellWidth }) => gridCellWidth} +\r\n      ${({ noteCircleSize }) => noteCircleSize}\r\n  );\r\n  height: ${({ noteCircleSize }) => noteCircleSize};\r\n  border-radius: calc(${({ noteCircleSize }) => noteCircleSize} / 2);\r\n  justify-self: center;\r\n`;\r\n\r\nconst NoteCircleText = styled(Text)<{ noteCircleSize: string }>`\r\n  width: ${({ noteCircleSize }) => noteCircleSize};\r\n  height: ${({ noteCircleSize }) => noteCircleSize};\r\n  border-radius: calc(${({ noteCircleSize }) => noteCircleSize} / 2);\r\n  text-align: center;\r\n`;\r\n\r\nconst NoteBox = styled(Box)<{\r\n  disabled: boolean;\r\n  isStringMuted: boolean;\r\n  isVisible: boolean;\r\n  isActive: boolean;\r\n  isPushed: boolean;\r\n}>`\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  color: ${({ isStringMuted, isActive, theme }) =>\r\n    isStringMuted\r\n      ? theme.global.colors['text-xweak'].dark\r\n      : isActive\r\n      ? theme.global.colors['text'].dark\r\n      : theme.global.colors['text-weak'].dark};\r\n\r\n  font-weight: ${({ isActive }) => (isActive ? 'bold' : 'normal')};\r\n\r\n  ${NoteCircleText} {\r\n    display: ${({ isVisible }) => (isVisible ? 'inline-block' : 'none')};\r\n  }\r\n\r\n  ${({ isVisible }) =>\r\n    isVisible &&\r\n    css`\r\n      & > :nth-child(2) {\r\n        display: none;\r\n      }\r\n    `}\r\n\r\n  ${({ disabled, isPushed, theme }) =>\r\n    !disabled &&\r\n    css`\r\n      cursor: pointer;\r\n\r\n      &:hover {\r\n        ${NoteCircleText} {\r\n          display: inline-block;\r\n\r\n          background: ${isPushed\r\n            ? theme.global.colors['accent-1']\r\n            : theme.global.colors['background-contrast'].dark};\r\n\r\n          font-weight: bold;\r\n        }\r\n\r\n        & > :nth-child(2) {\r\n          display: none;\r\n        }\r\n      }\r\n    `}\r\n`;\r\n\r\n/**\r\n * All parameters are zero-based, inclusive.\r\n *\r\n * @param startFretId Start fret (zero-based, inclusive)\r\n * @param startStringIndex Start string (zero-based, inclusive)\r\n * @param endFretId Optional end fret (zero-based, inclusive), defaults to start fret\r\n * @param endStringIndex Optional end string (zero-based, inclusive), defaults to start string\r\n */\r\nconst getGridArea = (\r\n  startFretId: number,\r\n  startStringIndex: number,\r\n  endFretId?: number,\r\n  endStringIndex?: number,\r\n) => {\r\n  const start = `${startFretId * 2 + 1}/${startStringIndex * 2 + 1}`;\r\n  const end = `${(endFretId ?? startFretId) * 2 + 3}/${\r\n    (endStringIndex ?? startStringIndex) * 2 + 3\r\n  }`;\r\n  return `${start} / ${end}`;\r\n};\r\n\r\nexport interface Props {\r\n  instrument?: InstrumentName;\r\n  chord: ChordName | undefined;\r\n  disabled: boolean;\r\n  highlightedNote: NoteName | undefined;\r\n  onHighlightNote: ((noteToSelect: NoteName | undefined) => void) | undefined;\r\n}\r\n\r\nconst StringChord = ({\r\n  instrument = 'guitar',\r\n  chord,\r\n  disabled,\r\n  highlightedNote,\r\n  onHighlightNote,\r\n}: Props) => {\r\n  const chordsForInstrument = chords[instrument] || [];\r\n  const chordDefinition =\r\n    chord && chordsForInstrument.find((c) => c.chord === chord);\r\n\r\n  const stringPositions = chordDefinition?.positions ?? [\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n  ];\r\n  const stringPositionsParts = getStringPositionsParts(stringPositions);\r\n  const mutedStrings = chordDefinition?.mutedStrings ?? [];\r\n\r\n  const maxFretId = (stringPositionsParts.reduce(\r\n    (acc, { fretId }) => Math.max(acc, fretId + 1),\r\n    4,\r\n  ) + 1) as FretId;\r\n\r\n  const tuning = tunings[instrument] ?? [null, null, null, null, null, null];\r\n  const maxStringIndex = tuning.length - 1;\r\n\r\n  const strings = tuning.map((_, stringIndex) => ({\r\n    gridArea: getGridArea(1, stringIndex + 0.5, maxFretId, stringIndex + 0.5),\r\n    isMuted: mutedStrings.includes((stringIndex + 1) as StringId),\r\n  }));\r\n\r\n  const frets = new Array(maxFretId).fill(undefined).map((_, fretId) => ({\r\n    gridArea: getGridArea(fretId, 0.5, fretId, maxStringIndex - 0.5),\r\n    isStart: fretId === 0,\r\n  }));\r\n\r\n  const positions = stringPositionsParts.map(\r\n    ({ startStringId, endStringId, fretId, fingerIndex }) => ({\r\n      gridArea: getGridArea(fretId, startStringId - 1, fretId, endStringId - 1),\r\n      finger: fingerIndex + 1,\r\n    }),\r\n  );\r\n\r\n  const notes = tuning.map((stringNote, stringIndex) => {\r\n    const stringId = (stringIndex + 1) as StringId;\r\n    const isStringMuted = mutedStrings.includes(stringId);\r\n\r\n    return new Array(maxFretId).fill(undefined).map((_, i) => {\r\n      const isActive = !!stringPositionsParts.find(\r\n        ({ startStringId, endStringId, fretId }) =>\r\n          stringId >= startStringId && stringId <= endStringId && i === fretId,\r\n      );\r\n      const note = transposeNote(stringNote, i);\r\n      const [noteName] = getNoteParts(note);\r\n\r\n      return {\r\n        gridArea: getGridArea(i, stringIndex),\r\n        isStringMuted,\r\n        isVisible: isActive || i === 0,\r\n        isActive: isActive,\r\n        isPushed: isActive && i !== 0,\r\n        isHighlighted: !disabled && highlightedNote === noteName,\r\n        note,\r\n        noteName,\r\n      };\r\n    });\r\n  });\r\n\r\n  const isSmallSize = useContext(ResponsiveContext) === 'small';\r\n  const noteCircleSize = isSmallSize ? '20px' : '30px';\r\n  const gridCellWidth = isSmallSize ? '24px' : '36px';\r\n\r\n  return (\r\n    <Grid\r\n      columns={Array((maxStringIndex + 1) * 2).fill(\r\n        isSmallSize ? '12px' : '18px',\r\n      )}\r\n      rows={Array(maxFretId * 2).fill(isSmallSize ? '14px' : '21px')}\r\n    >\r\n      {strings.map(({ gridArea }) => (\r\n        <Box\r\n          key={gridArea}\r\n          gridArea={gridArea}\r\n          border={[\r\n            {\r\n              side: 'left',\r\n              color: 'text-xweak',\r\n              size: 'xsmall',\r\n            },\r\n          ]}\r\n        />\r\n      ))}\r\n\r\n      {frets.map(({ gridArea, isStart }) => (\r\n        <Box\r\n          key={gridArea}\r\n          gridArea={gridArea}\r\n          border={{\r\n            side: 'bottom',\r\n            color: 'text',\r\n            size: isStart ? 'medium' : 'xsmall',\r\n          }}\r\n        />\r\n      ))}\r\n\r\n      {positions.map(({ gridArea, finger }) => (\r\n        <PushedFingerBox\r\n          key={gridArea}\r\n          gridArea={gridArea}\r\n          noteCircleSize={noteCircleSize}\r\n          gridCellWidth={gridCellWidth}\r\n          alignSelf=\"center\"\r\n          background={{ dark: 'border' }}\r\n        />\r\n      ))}\r\n\r\n      {notes.map((s) =>\r\n        s.map(\r\n          ({\r\n            isStringMuted,\r\n            isVisible,\r\n            isActive,\r\n            isPushed,\r\n            isHighlighted,\r\n            note,\r\n            noteName,\r\n            gridArea,\r\n          }) => (\r\n            <NoteBox\r\n              key={gridArea}\r\n              gridArea={gridArea}\r\n              align=\"center\"\r\n              justify=\"center\"\r\n              disabled={disabled}\r\n              isStringMuted={isStringMuted}\r\n              isVisible={isVisible || isHighlighted}\r\n              isActive={isActive || isHighlighted}\r\n              isPushed={isPushed}\r\n              onClick={\r\n                !disabled && onHighlightNote\r\n                  ? () => onHighlightNote(isHighlighted ? undefined : noteName)\r\n                  : undefined\r\n              }\r\n            >\r\n              <NoteCircleText\r\n                noteCircleSize={noteCircleSize}\r\n                size={isSmallSize ? 'xsmall' : 'medium'}\r\n                textAlign=\"center\"\r\n              >\r\n                <FormattedNote note={note} />\r\n              </NoteCircleText>\r\n              {isStringMuted && <Close size={isSmallSize ? '8px' : '12px'} />}\r\n            </NoteBox>\r\n          ),\r\n        ),\r\n      )}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default StringChord;\r\n","import { Card, CardBody, CardHeader } from 'grommet';\r\nimport { useRef } from 'react';\r\nimport useSortable from '../../../Hooks/useSortable';\r\nimport type { ChordName } from '../../../Theory/chords';\r\nimport type { NoteName } from '../../../Theory/notes';\r\nimport ChordDefinition from './ChordDefinition';\r\nimport StringChord from './StringChord';\r\n\r\nexport interface Props {\r\n  chord?: ChordName;\r\n  index?: number;\r\n  isEditing?: boolean;\r\n  highlightedNote?: NoteName;\r\n  onMove?: (chordToMoveHereIndex: number) => void;\r\n  onRemove?: () => void;\r\n  onHighlightNote?: (noteToSelect: NoteName | undefined) => void;\r\n}\r\n\r\nconst ChordCard = ({\r\n  chord,\r\n  index = -1,\r\n  isEditing = false,\r\n  highlightedNote,\r\n  onMove,\r\n  onRemove,\r\n  onHighlightNote,\r\n}: Props) => {\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  const isDragging = useSortable(index, isEditing, ref, onMove);\r\n\r\n  return (\r\n    <Card\r\n      ref={ref}\r\n      background=\"background-back\"\r\n      width=\"fit-content\"\r\n      style={{\r\n        cursor: isEditing ? 'grab' : 'default',\r\n        opacity: isDragging ? 0.3 : 1,\r\n      }}\r\n    >\r\n      <CardHeader\r\n        background=\"background-contrast\"\r\n        border={{ side: 'bottom', color: 'background-contrast' }}\r\n        justify=\"between\"\r\n      >\r\n        <ChordDefinition\r\n          chord={chord}\r\n          isEditing={isEditing || false}\r\n          onRemove={onRemove}\r\n        />\r\n      </CardHeader>\r\n      <CardBody\r\n        pad={{ bottom: 'small', horizontal: 'xsmall' }}\r\n        border={{ side: 'top', color: 'background-contrast' }}\r\n      >\r\n        <StringChord\r\n          chord={chord}\r\n          disabled={isEditing || false}\r\n          highlightedNote={highlightedNote}\r\n          onHighlightNote={onHighlightNote}\r\n        />\r\n      </CardBody>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ChordCard;\r\n","import { Box, Button, ResponsiveContext, Stack, Text } from 'grommet';\r\nimport { Add } from 'grommet-icons';\r\nimport { useContext } from 'react';\r\nimport ChordCard from './ChordCard';\r\n\r\nexport interface Props {\r\n  onAdd: () => void;\r\n}\r\n\r\nconst EmptyChordCard = ({ onAdd }: Props) => {\r\n  const isSmallSize = useContext(ResponsiveContext) === 'small';\r\n\r\n  return (\r\n    <Stack fill interactiveChild=\"last\">\r\n      <ChordCard />\r\n      <Button fill onClick={onAdd}>\r\n        <Box\r\n          fill\r\n          align=\"center\"\r\n          justify=\"center\"\r\n          gap=\"large\"\r\n          background={{ color: 'background', opacity: 'strong' }}\r\n          border={{ color: 'border-semi' }}\r\n        >\r\n          <Add size={isSmallSize ? 'medium' : 'large'} color=\"accent-1\" />\r\n          <Text\r\n            size={isSmallSize ? 'medium' : 'large'}\r\n            textAlign=\"center\"\r\n            color=\"accent-1\"\r\n          >\r\n            Add a chord to start\r\n          </Text>\r\n        </Box>\r\n      </Button>\r\n    </Stack>\r\n  );\r\n};\r\n\r\nexport default EmptyChordCard;\r\n","import { Grid, ResponsiveContext } from 'grommet';\r\nimport { useContext, useState } from 'react';\r\nimport type { ChordName } from '../../../Theory/chords';\r\nimport type { NoteName } from '../../../Theory/notes';\r\nimport ChordCard from './ChordCard';\r\nimport EmptyChordCard from './EmptyChordCard';\r\n\r\nexport interface Props {\r\n  chords: ChordName[];\r\n  isEditing: boolean;\r\n  onAddChord: () => void;\r\n  onMoveChord: (chordToMoveIndex: number, targetChordIndex: number) => void;\r\n  onRemoveChord: (chordToRemove: ChordName) => void;\r\n}\r\n\r\nconst ChordCardCollection = ({\r\n  chords,\r\n  isEditing,\r\n  onAddChord,\r\n  onMoveChord,\r\n  onRemoveChord,\r\n}: Props) => {\r\n  const [highlightedNote, setHighlightedNote] = useState<NoteName>();\r\n\r\n  const isSmallSize = useContext(ResponsiveContext) === 'small';\r\n\r\n  return (\r\n    <Grid\r\n      columns={isSmallSize ? '152px' : '230px'}\r\n      gap={isSmallSize ? 'xsmall' : 'small'}\r\n      justify=\"center\"\r\n    >\r\n      {chords.length !== 0 ? (\r\n        chords.map((c, i) => (\r\n          <ChordCard\r\n            key={c}\r\n            chord={c}\r\n            index={i}\r\n            isEditing={isEditing}\r\n            highlightedNote={highlightedNote}\r\n            onMove={(chordToMoveHereIndex) =>\r\n              onMoveChord(chordToMoveHereIndex, i)\r\n            }\r\n            onRemove={() => onRemoveChord(c)}\r\n            onHighlightNote={setHighlightedNote}\r\n          />\r\n        ))\r\n      ) : (\r\n        <EmptyChordCard onAdd={onAddChord} />\r\n      )}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default ChordCardCollection;\r\n","import { Collapsible, Select } from 'grommet';\r\nimport { Add } from 'grommet-icons';\r\nimport type { MutableRefObject } from 'react';\r\nimport { useCallback, useMemo, useState } from 'react';\r\nimport type { ChordName } from '../../../Theory/chords';\r\n\r\nexport interface Props {\r\n  chords: ChordName[];\r\n  isEditing: boolean;\r\n  onAdd: (chordToAdd: ChordName) => void;\r\n  focusRef: MutableRefObject<((options?: FocusOptions) => void) | undefined>;\r\n}\r\n\r\nconst ChordSelector = ({ chords, isEditing, focusRef, onAdd }: Props) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [searchString, setSearchString] = useState('');\r\n\r\n  focusRef.current = useCallback(\r\n    // delay of 300 ms to allow for Collapsible animation to end\r\n    () => setTimeout(() => setIsOpen(true), 300),\r\n    [setIsOpen],\r\n  );\r\n\r\n  const matchingChords = useMemo(\r\n    () =>\r\n      chords\r\n        .map((c) => ({ label: c, value: c }))\r\n        .filter((x) =>\r\n          x.label.toLowerCase().includes(searchString.toLowerCase()),\r\n        ),\r\n    [chords, searchString],\r\n  );\r\n\r\n  const handleChange = useCallback(\r\n    ({ value }) => {\r\n      setSearchString('');\r\n      onAdd(value as ChordName);\r\n    },\r\n    [onAdd],\r\n  );\r\n\r\n  return (\r\n    <Collapsible open={isEditing} direction=\"horizontal\">\r\n      <Select\r\n        icon={<Add />}\r\n        open={isOpen}\r\n        options={matchingChords}\r\n        valueKey={{ key: 'value', reduce: true }}\r\n        labelKey={(c) => c.label}\r\n        closeOnChange={false}\r\n        placeholder=\"Add chords\"\r\n        searchPlaceholder=\"Search by name\"\r\n        a11yTitle=\"Select chords to add\"\r\n        onOpen={() => setIsOpen(true)}\r\n        onClose={() => setIsOpen(false)}\r\n        onSearch={setSearchString}\r\n        onChange={handleChange}\r\n      />\r\n    </Collapsible>\r\n  );\r\n};\r\n\r\nexport default ChordSelector;\r\n","import type { KeyName } from '../Theory/keys';\r\nimport { getKeyNameParts } from '../Theory/keys';\r\nimport { Modifier } from './FormattedChord';\r\nimport FormattedNoteName from './FormattedNoteName';\r\n\r\nexport interface Props {\r\n  keyName: KeyName;\r\n}\r\n\r\nconst FormattedKey = ({ keyName }: Props) => {\r\n  const [rootNoteName, keyModifier] = keyName ? getKeyNameParts(keyName) : [];\r\n  return (\r\n    <span>\r\n      <FormattedNoteName note={rootNoteName} />\r\n      {keyModifier && <Modifier>{keyModifier}</Modifier>}\r\n    </span>\r\n  );\r\n};\r\n\r\nexport default FormattedKey;\r\n","import { Heading } from 'grommet';\r\nimport { PropsWithChildren } from 'react';\r\n\r\nexport type Props = PropsWithChildren<{}>;\r\n\r\nconst PageHeading = ({ children }: Props) => (\r\n  <Heading level={2} size=\"small\" margin={{ vertical: 'small' }}>\r\n    {children}\r\n  </Heading>\r\n);\r\n\r\nexport default PageHeading;\r\n","import { Box, Keyboard, Text, TextInput } from 'grommet';\r\nimport FormattedKey from '../../../Components/FormattedKey';\r\nimport PageHeading from '../../../Components/PageHeading';\r\nimport type { KeyName } from '../../../Theory/keys';\r\n\r\nexport interface Props {\r\n  name: string;\r\n  description: string;\r\n  selectedKey?: KeyName;\r\n  isEditing: boolean;\r\n  onSetName: (newName: string) => void;\r\n  onSetDescription: (newDescription: string) => void;\r\n  onIsEditingChange: (isEditing: boolean) => void;\r\n}\r\n\r\nconst DetailsBox = ({\r\n  name,\r\n  description,\r\n  selectedKey,\r\n  isEditing,\r\n  onSetName,\r\n  onSetDescription,\r\n  onIsEditingChange,\r\n}: Props) => {\r\n  return (\r\n    <Keyboard onEnter={() => onIsEditingChange(false)}>\r\n      <Box>\r\n        <Box direction=\"row\" align=\"baseline\" gap=\"small\">\r\n          <PageHeading>\r\n            {isEditing ? (\r\n              <TextInput\r\n                plain=\"full\"\r\n                value={name}\r\n                placeholder=\"Enter name\"\r\n                onChange={(event) => onSetName(event.target.value)}\r\n              />\r\n            ) : (\r\n              name || <em>Unnamed chord set</em>\r\n            )}{' '}\r\n          </PageHeading>\r\n          {selectedKey && !isEditing && (\r\n            <Text size=\"large\">\r\n              in <FormattedKey keyName={selectedKey} />\r\n            </Text>\r\n          )}\r\n        </Box>\r\n        <Text>\r\n          {isEditing ? (\r\n            <TextInput\r\n              plain=\"full\"\r\n              value={description}\r\n              placeholder=\"Enter description\"\r\n              onChange={(event) => onSetDescription(event.target.value)}\r\n            />\r\n          ) : (\r\n            description || <em>No description</em>\r\n          )}\r\n        </Text>\r\n      </Box>\r\n    </Keyboard>\r\n  );\r\n};\r\n\r\nexport default DetailsBox;\r\n","import { Box, Button, Collapsible } from 'grommet';\r\nimport { Checkmark, Edit } from 'grommet-icons';\r\n\r\nexport interface Props {\r\n  isEditing: boolean;\r\n  onIsEditingChange: (isEditing: boolean) => void;\r\n}\r\n\r\nconst EditButton = ({ isEditing, onIsEditingChange }: Props) => (\r\n  <Button\r\n    icon={\r\n      <Box direction=\"row\">\r\n        <Collapsible open={isEditing} direction=\"horizontal\">\r\n          <Checkmark />\r\n        </Collapsible>\r\n        <Collapsible open={!isEditing} direction=\"horizontal\">\r\n          <Edit />\r\n        </Collapsible>\r\n      </Box>\r\n    }\r\n    a11yTitle={isEditing ? 'Done adding/removing chords' : 'Add/remove chords'}\r\n    primary={isEditing}\r\n    onClick={() => onIsEditingChange(!isEditing)}\r\n  />\r\n);\r\n\r\nexport default EditButton;\r\n","import { Collapsible, Select } from 'grommet';\r\nimport { Filter } from 'grommet-icons';\r\nimport { useCallback, useMemo, useState } from 'react';\r\nimport type { KeyName } from '../../../Theory/keys';\r\n\r\nexport interface Props {\r\n  selectedKey?: KeyName;\r\n  keys: KeyName[];\r\n  suggestedKeys: KeyName[];\r\n  isEditing: boolean;\r\n  onChange: (newKey?: KeyName) => void;\r\n}\r\n\r\nconst ChordSelector = ({\r\n  selectedKey,\r\n  suggestedKeys,\r\n  keys,\r\n  isEditing,\r\n  onChange,\r\n}: Props) => {\r\n  const [searchString, setSearchString] = useState('');\r\n  const matchingKeys = useMemo(() => {\r\n    if (!searchString && suggestedKeys.length > 0) {\r\n      return [\r\n        { label: 'Suggested keys' },\r\n        ...suggestedKeys.map((k) => ({\r\n          label: k,\r\n          value: k,\r\n        })),\r\n        { label: 'Other keys' },\r\n        ...keys\r\n          .filter((k) => !suggestedKeys.includes(k))\r\n          .map((k) => ({ label: k, value: k })),\r\n      ];\r\n    }\r\n\r\n    return keys\r\n      .map((k) => ({ label: k, value: k }))\r\n      .filter((x) =>\r\n        x.label.toLowerCase().includes(searchString.toLowerCase()),\r\n      );\r\n  }, [keys, searchString, suggestedKeys]);\r\n\r\n  const handleChange = useCallback(\r\n    ({ value }) => {\r\n      setSearchString('');\r\n      onChange((value || undefined) as KeyName | undefined);\r\n    },\r\n    [onChange],\r\n  );\r\n\r\n  return (\r\n    <Collapsible open={isEditing} direction=\"horizontal\">\r\n      <Select\r\n        icon={<Filter />}\r\n        value={selectedKey}\r\n        clear={{ label: 'Clear key filter' }}\r\n        options={matchingKeys}\r\n        valueKey={{ key: 'value', reduce: true }}\r\n        labelKey={(c) => c.label}\r\n        disabledKey={(c) => c.value === undefined}\r\n        placeholder=\"Filter by key\"\r\n        searchPlaceholder=\"Search by name\"\r\n        a11yTitle=\"Filter chords by key\"\r\n        onSearch={setSearchString}\r\n        onChange={handleChange}\r\n      />\r\n    </Collapsible>\r\n  );\r\n};\r\n\r\nexport default ChordSelector;\r\n","import { Box, Keyboard } from 'grommet';\r\nimport { useRef, useState } from 'react';\r\nimport PageHeader from '../../../Components/PageHeader';\r\nimport type { ChordName } from '../../../Theory/chords';\r\nimport type { KeyName } from '../../../Theory/keys';\r\nimport ChordCardCollection from './ChordCardCollection';\r\nimport ChordSelector from './ChordSelector';\r\nimport DetailsBox from './DetailsBox';\r\nimport EditButton from './EditButton';\r\nimport KeySelector from './KeySelector';\r\n\r\nexport interface Props {\r\n  name: string;\r\n  description: string;\r\n  selectedKey?: KeyName;\r\n  selectedChords: ChordName[];\r\n  availableKeys: KeyName[];\r\n  filteredChords: ChordName[];\r\n  suggestedKeys: KeyName[];\r\n  onSetName: (newName: string) => void;\r\n  onSetDescription: (newDescription: string) => void;\r\n  onSetKey: (newKey?: KeyName) => void;\r\n  onAddChord: (chordToAdd: ChordName) => void;\r\n  onMoveChord: (chordToMoveIndex: number, targetChordIndex: number) => void;\r\n  onRemoveChord: (chordToRemove: ChordName) => void;\r\n}\r\n\r\nconst ChordSetPage = ({\r\n  name,\r\n  description,\r\n  selectedKey,\r\n  selectedChords,\r\n  availableKeys,\r\n  filteredChords,\r\n  suggestedKeys,\r\n  onSetName,\r\n  onSetDescription,\r\n  onSetKey,\r\n  onAddChord,\r\n  onMoveChord,\r\n  onRemoveChord,\r\n}: Props) => {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n\r\n  const chordSelectorFocusRef = useRef<(options?: FocusOptions) => void>();\r\n\r\n  return (\r\n    <Keyboard onEsc={() => setIsEditing(false)}>\r\n      <Box gap=\"medium\">\r\n        <PageHeader>\r\n          <DetailsBox\r\n            name={name}\r\n            description={description}\r\n            selectedKey={selectedKey}\r\n            isEditing={isEditing}\r\n            onSetName={onSetName}\r\n            onSetDescription={onSetDescription}\r\n            onIsEditingChange={setIsEditing}\r\n          />\r\n          <Box direction=\"row\" justify=\"end\" align=\"center\" gap=\"small\">\r\n            <KeySelector\r\n              selectedKey={selectedKey}\r\n              keys={availableKeys}\r\n              suggestedKeys={suggestedKeys}\r\n              isEditing={isEditing}\r\n              onChange={onSetKey}\r\n            />\r\n            <ChordSelector\r\n              chords={filteredChords}\r\n              isEditing={isEditing}\r\n              onAdd={onAddChord}\r\n              focusRef={chordSelectorFocusRef}\r\n            />\r\n            <EditButton\r\n              isEditing={isEditing}\r\n              onIsEditingChange={setIsEditing}\r\n            />\r\n          </Box>\r\n        </PageHeader>\r\n        <ChordCardCollection\r\n          chords={selectedChords}\r\n          isEditing={isEditing}\r\n          onAddChord={() => {\r\n            setIsEditing(true);\r\n            chordSelectorFocusRef.current?.();\r\n          }}\r\n          onMoveChord={onMoveChord}\r\n          onRemoveChord={onRemoveChord}\r\n        />\r\n      </Box>\r\n    </Keyboard>\r\n  );\r\n};\r\n\r\nexport default ChordSetPage;\r\n","import type { Dispatch } from 'react';\r\nimport { useCallback } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport * as actions from '../../Store/actions';\r\nimport * as selectors from '../../Store/selectors';\r\nimport { getAllKeys } from '../../Theory/keys';\r\nimport NotFoundPage from '../NotFoundPage';\r\nimport type { PageProps } from '../Types';\r\nimport ChordSetPage from './Components/ChordSetPage';\r\n\r\nconst useDispatchAction =\r\n  (dispatch: Dispatch<actions.Action>, chordSetIndex: number) =>\r\n  <T extends Array<unknown>>(\r\n    action: (chordSetIndex: number, ...args: [...T]) => actions.Action,\r\n  ) =>\r\n    // eslint-disable-next-line react-hooks/rules-of-hooks\r\n    useCallback(\r\n      (...args: [...T]) => dispatch(action(chordSetIndex, ...args)),\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n      [action, chordSetIndex, dispatch],\r\n    );\r\n\r\nconst ChordSetPageContainer = ({ state, dispatch }: PageProps) => {\r\n  const { chordSetId } = useParams();\r\n  const chordSetIndex = Number.parseInt(chordSetId!);\r\n\r\n  const dispatchAction = useDispatchAction(dispatch, chordSetIndex);\r\n\r\n  const allKeys = getAllKeys();\r\n  const chordSet = selectors.getChordSet(chordSetIndex)(state);\r\n  const filteredChords = selectors.getFilteredChords(chordSetIndex)(state);\r\n  const suggestedKeys = selectors.getSuggestedKeys(chordSetIndex)(state);\r\n\r\n  const handleSetName = dispatchAction(actions.setChordSetName);\r\n  const handleSetDescription = dispatchAction(actions.setChordSetDescription);\r\n  const handleSetKey = dispatchAction(actions.setChordSetKey);\r\n  const handleAddChord = dispatchAction(actions.addChordToSet);\r\n  const handleMoveChord = dispatchAction(actions.moveChordInSet);\r\n  const handleRemoveChord = dispatchAction(actions.removeChordFromSet);\r\n\r\n  if (!chordSet || !filteredChords || !suggestedKeys) {\r\n    return <NotFoundPage />;\r\n  }\r\n\r\n  const { name, description, selectedKey, selectedChords } = chordSet;\r\n  return (\r\n    <ChordSetPage\r\n      name={name}\r\n      description={description}\r\n      selectedKey={selectedKey}\r\n      selectedChords={selectedChords}\r\n      availableKeys={allKeys}\r\n      filteredChords={filteredChords}\r\n      suggestedKeys={suggestedKeys}\r\n      onSetName={handleSetName}\r\n      onSetDescription={handleSetDescription}\r\n      onSetKey={handleSetKey}\r\n      onAddChord={handleAddChord}\r\n      onMoveChord={handleMoveChord}\r\n      onRemoveChord={handleRemoveChord}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ChordSetPageContainer;\r\n","import { Card, Text } from 'grommet';\r\nimport FormattedChord from '../../../Components/FormattedChord';\r\nimport type { ChordName } from '../../../Theory/chords';\r\n\r\nexport interface Props {\r\n  chord: ChordName;\r\n}\r\n\r\nconst ChordBadge = ({ chord }: Props) => (\r\n  <Card background=\"background-front\" width={{ min: '32px' }} pad=\"xxsmall\">\r\n    <Text size=\"medium\" textAlign=\"center\" color=\"accent-1\">\r\n      <FormattedChord chord={chord} />\r\n    </Text>\r\n  </Card>\r\n);\r\n\r\nexport default ChordBadge;\r\n","import { Box, Stack } from 'grommet';\r\nimport ChordBadge from './ChordBadge';\r\n\r\nconst EmptyChordBadge = () => (\r\n  <Stack interactiveChild=\"last\">\r\n    <ChordBadge chord=\"C\" />\r\n    <Box\r\n      fill\r\n      background={{ color: 'background', opacity: 'strong' }}\r\n      border={{ color: 'border-semi' }}\r\n    />\r\n  </Stack>\r\n);\r\n\r\nexport default EmptyChordBadge;\r\n","import {\r\n  Box,\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardHeader,\r\n  Collapsible,\r\n  Heading,\r\n  Keyboard,\r\n  Text,\r\n} from 'grommet';\r\nimport { Checkmark, Close, Trash } from 'grommet-icons';\r\nimport { useCallback, useRef, useState } from 'react';\r\nimport FormattedKey from '../../../Components/FormattedKey';\r\nimport Link from '../../../Components/Link';\r\nimport useSortable from '../../../Hooks/useSortable';\r\nimport type { ChordName } from '../../../Theory/chords';\r\nimport type { KeyName } from '../../../Theory/keys';\r\nimport ChordBadge from './ChordBadge';\r\nimport EmptyChordBadge from './EmptyChordBadge';\r\n\r\nexport interface Props {\r\n  chordSetIndex?: number;\r\n  name?: string;\r\n  description?: string;\r\n  selectedKey?: KeyName;\r\n  selectedChords?: ChordName[];\r\n  onMove?: (setToMoveHereIndex: number) => void;\r\n  onRemove?: () => void;\r\n}\r\n\r\nconst ChordSetCard = ({\r\n  chordSetIndex = -1,\r\n  name = '',\r\n  description = '',\r\n  selectedKey,\r\n  selectedChords = [],\r\n  onMove,\r\n  onRemove,\r\n}: Props) => {\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  const [isRemoving, setIsRemoving] = useState(false);\r\n\r\n  const handleMove = useCallback(\r\n    (setToMoveHereIndex: number) => {\r\n      setIsRemoving(false);\r\n      onMove?.(setToMoveHereIndex);\r\n    },\r\n    [onMove],\r\n  );\r\n\r\n  const isDragging = useSortable(chordSetIndex, !isRemoving, ref, handleMove);\r\n\r\n  return (\r\n    <Keyboard onEsc={() => setIsRemoving(false)}>\r\n      <Card\r\n        ref={ref}\r\n        background=\"background-back\"\r\n        fill\r\n        border={{ color: 'border-brand' }}\r\n        style={{\r\n          cursor: !isRemoving ? 'grab' : 'default',\r\n          opacity: isDragging ? 0.3 : 1,\r\n        }}\r\n      >\r\n        <CardHeader\r\n          pad=\"small\"\r\n          background=\"background-contrast\"\r\n          border={{ side: 'bottom', color: 'background-contrast' }}\r\n        >\r\n          <Link to={`/chord-sets/${chordSetIndex}`}>\r\n            <Heading level={3} size=\"small\" margin=\"none\" color=\"brand\">\r\n              {name || <em>Unnamed chord set</em>}\r\n            </Heading>\r\n            {selectedKey && (\r\n              <Text size=\"large\">\r\n                in <FormattedKey keyName={selectedKey} />\r\n              </Text>\r\n            )}\r\n          </Link>\r\n          <Box direction=\"row\" gap=\"small\" justify=\"end\" align=\"center\">\r\n            <Collapsible open={isRemoving} direction=\"horizontal\">\r\n              <Button\r\n                icon={<Close />}\r\n                a11yTitle={`Cancel removing chord set ${name}`}\r\n                onClick={() => setIsRemoving(false)}\r\n              />\r\n            </Collapsible>\r\n            <Button\r\n              icon={\r\n                <Box direction=\"row\">\r\n                  <Collapsible open={isRemoving} direction=\"horizontal\">\r\n                    <Checkmark />\r\n                  </Collapsible>\r\n                  <Collapsible open={!isRemoving} direction=\"horizontal\">\r\n                    <Trash />\r\n                  </Collapsible>\r\n                </Box>\r\n              }\r\n              a11yTitle={\r\n                isRemoving\r\n                  ? `Confirm removing chord set ${name}`\r\n                  : `Remove chord set ${name}`\r\n              }\r\n              primary={isRemoving}\r\n              onClick={() => {\r\n                if (isRemoving && onRemove) {\r\n                  onRemove();\r\n                }\r\n\r\n                setIsRemoving(!isRemoving);\r\n              }}\r\n            />\r\n          </Box>\r\n        </CardHeader>\r\n        <CardBody\r\n          pad=\"small\"\r\n          gap=\"small\"\r\n          border={{ side: 'top', color: 'background-contrast' }}\r\n        >\r\n          <Text>{description || <em>No description</em>}</Text>\r\n          <Box direction=\"row\" align=\"start\" wrap gap=\"xsmall\">\r\n            {selectedChords.length > 0 ? (\r\n              selectedChords.map((c) => <ChordBadge key={c} chord={c} />)\r\n            ) : (\r\n              <EmptyChordBadge />\r\n            )}\r\n          </Box>\r\n        </CardBody>\r\n      </Card>\r\n    </Keyboard>\r\n  );\r\n};\r\n\r\nexport default ChordSetCard;\r\n","import { Box, Button, Stack, Text } from 'grommet';\r\nimport { Add } from 'grommet-icons';\r\nimport ChordSetCard from './ChordSetCard';\r\n\r\nexport interface Props {\r\n  onAdd: () => void;\r\n}\r\n\r\nconst EmptyChordSetCard = ({ onAdd }: Props) => (\r\n  <Stack fill interactiveChild=\"last\">\r\n    <ChordSetCard />\r\n    <Button fill onClick={onAdd}>\r\n      <Box\r\n        fill\r\n        align=\"center\"\r\n        justify=\"center\"\r\n        gap=\"medium\"\r\n        height={{ min: '150px' }}\r\n        background={{ color: 'background', opacity: 'strong' }}\r\n        border={{ color: 'border-brand-semi' }}\r\n      >\r\n        <Add size=\"large\" color=\"accent-1\" />\r\n        <Text size=\"large\" textAlign=\"center\" color=\"accent-1\">\r\n          Add your first chord set\r\n        </Text>\r\n      </Box>\r\n    </Button>\r\n  </Stack>\r\n);\r\n\r\nexport default EmptyChordSetCard;\r\n","import { Grid } from 'grommet';\r\nimport type { ChordSet as ChordSetType } from '../../../Store/Types/State';\r\nimport ChordSetCard from './ChordSetCard';\r\nimport EmptyChordSetCard from './EmptyChordSetCard';\r\n\r\nexport interface Props {\r\n  chordSets: ChordSetType[];\r\n  onAddChordSet: () => void;\r\n  onMoveChordSet: (\r\n    chordSetToMoveIndex: number,\r\n    targetChordSetIndex: number,\r\n  ) => void;\r\n  onRemoveChordSet: (chordSetToRemoveIndex: number) => void;\r\n}\r\n\r\nconst ChordSetCardCollection = ({\r\n  chordSets,\r\n  onAddChordSet,\r\n  onMoveChordSet,\r\n  onRemoveChordSet,\r\n}: Props) => (\r\n  <Grid columns=\"medium\" gap=\"small\" justify=\"center\">\r\n    {chordSets.length !== 0 ? (\r\n      chordSets.map(({ name, description, selectedKey, selectedChords }, i) => (\r\n        <ChordSetCard\r\n          key={i}\r\n          chordSetIndex={i}\r\n          name={name}\r\n          description={description}\r\n          selectedKey={selectedKey}\r\n          selectedChords={selectedChords}\r\n          onMove={(setToMoveHereIndex) => onMoveChordSet(setToMoveHereIndex, i)}\r\n          onRemove={() => onRemoveChordSet(i)}\r\n        />\r\n      ))\r\n    ) : (\r\n      <EmptyChordSetCard onAdd={onAddChordSet} />\r\n    )}\r\n  </Grid>\r\n);\r\n\r\nexport default ChordSetCardCollection;\r\n","import { Box, Button, Text } from 'grommet';\r\nimport { Add } from 'grommet-icons';\r\nimport PageHeader from '../../../Components/PageHeader';\r\nimport PageHeading from '../../../Components/PageHeading';\r\nimport type { ChordSet as ChordSetType } from '../../../Store/Types/State';\r\nimport ChordSetCardCollection from './ChordSetCardCollection';\r\n\r\nexport interface Props {\r\n  chordSets: ChordSetType[];\r\n  onAddChordSet: () => void;\r\n  onMoveChordSet: (\r\n    chordSetToMoveIndex: number,\r\n    targetChordSetIndex: number,\r\n  ) => void;\r\n  onRemoveChordSet: (chordSetToRemoveIndex: number) => void;\r\n}\r\n\r\nconst ChordSetsPage = ({\r\n  chordSets,\r\n  onAddChordSet,\r\n  onMoveChordSet,\r\n  onRemoveChordSet,\r\n}: Props) => (\r\n  <Box gap=\"medium\">\r\n    <PageHeader>\r\n      <Box width=\"100%\">\r\n        <PageHeading>My chord sets</PageHeading>\r\n        <Text>My favourite song compositions.</Text>\r\n      </Box>\r\n      <Button\r\n        icon={<Add />}\r\n        a11yTitle=\"Add new chord set\"\r\n        onClick={onAddChordSet}\r\n      />\r\n    </PageHeader>\r\n    <ChordSetCardCollection\r\n      chordSets={chordSets}\r\n      onAddChordSet={onAddChordSet}\r\n      onMoveChordSet={onMoveChordSet}\r\n      onRemoveChordSet={onRemoveChordSet}\r\n    />\r\n  </Box>\r\n);\r\n\r\nexport default ChordSetsPage;\r\n","import type { Dispatch } from 'react';\r\nimport { useCallback } from 'react';\r\nimport * as actions from '../../Store/actions';\r\nimport * as selectors from '../../Store/selectors';\r\nimport type { PageProps } from '../Types';\r\nimport ChordSetsPage from './Components/ChordSetsPage';\r\n\r\nconst useDispatchAction =\r\n  (dispatch: Dispatch<actions.Action>) =>\r\n  <T extends Array<unknown>>(action: (...args: [...T]) => actions.Action) =>\r\n    // eslint-disable-next-line react-hooks/rules-of-hooks\r\n    useCallback(\r\n      (...args: [...T]) => dispatch(action(...args)),\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n      [action, dispatch],\r\n    );\r\n\r\nconst ChordSetsPageContainer = ({ state, dispatch }: PageProps) => {\r\n  const dispatchAction = useDispatchAction(dispatch);\r\n\r\n  const chordSets = selectors.getChordSets(state);\r\n\r\n  const handleAddChordSet = dispatchAction(actions.addChordSet);\r\n  const handleMoveChordSet = dispatchAction(actions.moveChordSet);\r\n  const handleRemoveChordSet = dispatchAction(actions.removeChordSet);\r\n\r\n  return (\r\n    <ChordSetsPage\r\n      chordSets={chordSets}\r\n      onAddChordSet={handleAddChordSet}\r\n      onMoveChordSet={handleMoveChordSet}\r\n      onRemoveChordSet={handleRemoveChordSet}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ChordSetsPageContainer;\r\n","import type { StoredState } from '../Hooks/useStoringReducer';\r\nimport type {\r\n  StateVersion0,\r\n  StateVersion1,\r\n  StateVersion2,\r\n} from './Types/State';\r\n\r\nconst migrateFrom0To1 = (state: StateVersion0): StateVersion1 => ({\r\n  version: 1,\r\n  ...state,\r\n});\r\n\r\nconst migrateFrom1To2 = ({\r\n  version,\r\n  ...rest\r\n}: StateVersion1): StateVersion2 => ({\r\n  version: 2,\r\n  chordSets: [{ name: '', description: '', ...rest }],\r\n});\r\n\r\nconst migrations: StoredState = [migrateFrom0To1, migrateFrom1To2];\r\n\r\nexport default migrations;\r\n","import type { Reducer } from 'react';\r\nimport { StoredState } from '../Hooks/useStoringReducer';\r\nimport type { Action } from './actions';\r\nimport migrations from './migrations';\r\nimport type { ChordSet, State } from './Types/State';\r\n\r\nexport const initialState: State = {\r\n  version: 2,\r\n  chordSets: [\r\n    {\r\n      name: 'Example: Leaving on a Jet Plane',\r\n      description: \"Example chordset for John Denver's Leaving on a Jet Plane\",\r\n      selectedChords: ['G', 'C', 'D'],\r\n    },\r\n  ],\r\n};\r\n\r\nexport const migrateState = (state: StoredState): State => {\r\n  const { version } = state;\r\n\r\n  for (let i = version ?? 0; i < initialState.version; i++) {\r\n    const migration = migrations[i];\r\n    state = migration(state);\r\n    console.log(`Migrated from version ${i} → ${i + 1}`, state);\r\n  }\r\n\r\n  return state as State;\r\n};\r\n\r\nconst reducer: Reducer<State, Action> = (state, action) => {\r\n  switch (action.type) {\r\n    case 'addChordSet':\r\n      return {\r\n        ...state,\r\n        chordSets: [\r\n          ...state.chordSets,\r\n          {\r\n            name: '',\r\n            description: '',\r\n            selectedChords: [],\r\n          },\r\n        ],\r\n      };\r\n\r\n    case 'moveChordSet': {\r\n      const { chordSetToMoveIndex, targetChordSetIndex } = action;\r\n      const { chordSets } = state;\r\n      if (\r\n        Math.min(chordSetToMoveIndex, targetChordSetIndex) < 0 ||\r\n        Math.max(chordSetToMoveIndex, targetChordSetIndex) >= chordSets.length\r\n      ) {\r\n        return state;\r\n      }\r\n\r\n      const newChordSets = [...chordSets];\r\n      const [chordSetToMove] = newChordSets.splice(chordSetToMoveIndex, 1);\r\n      newChordSets.splice(targetChordSetIndex, 0, chordSetToMove);\r\n\r\n      return {\r\n        ...state,\r\n        chordSets: newChordSets,\r\n      };\r\n    }\r\n\r\n    case 'removeChordSet': {\r\n      const { chordSetToRemoveIndex } = action;\r\n      const { chordSets } = state;\r\n      return chordSets[chordSetToRemoveIndex]\r\n        ? {\r\n            ...state,\r\n            chordSets: chordSets.filter((_, i) => i !== chordSetToRemoveIndex),\r\n          }\r\n        : state;\r\n    }\r\n\r\n    case 'setChordSetName':\r\n    case 'setChordSetDescription':\r\n    case 'setChordSetKey':\r\n    case 'addChordToSet':\r\n    case 'moveChordInSet':\r\n    case 'removeChordFromSet': {\r\n      const { chordSetIndex } = action;\r\n      const { chordSets } = state;\r\n      const newChordSet = chordSetReducer(\r\n        state.chordSets[chordSetIndex],\r\n        action,\r\n      );\r\n      return chordSets[chordSetIndex] &&\r\n        newChordSet !== chordSets[chordSetIndex]\r\n        ? {\r\n            ...state,\r\n            chordSets: chordSets.map((chordSet, i) =>\r\n              i === chordSetIndex ? newChordSet : chordSet,\r\n            ),\r\n          }\r\n        : state;\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst chordSetReducer: Reducer<ChordSet, Action> = (state, action) => {\r\n  switch (action.type) {\r\n    case 'setChordSetName':\r\n      return {\r\n        ...state,\r\n        name: action.newName,\r\n      };\r\n\r\n    case 'setChordSetDescription':\r\n      return {\r\n        ...state,\r\n        description: action.newDescription,\r\n      };\r\n\r\n    case 'setChordSetKey':\r\n      return {\r\n        ...state,\r\n        selectedKey: action.newKey,\r\n      };\r\n\r\n    case 'addChordToSet': {\r\n      const { chordToAdd } = action;\r\n      const { selectedChords } = state;\r\n      return !selectedChords.find((c) => c === chordToAdd)\r\n        ? {\r\n            ...state,\r\n            selectedChords: [...selectedChords, chordToAdd],\r\n          }\r\n        : state;\r\n    }\r\n\r\n    case 'moveChordInSet': {\r\n      const { chordToMoveIndex, targetChordIndex } = action;\r\n      const { selectedChords } = state;\r\n      if (\r\n        Math.min(chordToMoveIndex, targetChordIndex) < 0 ||\r\n        Math.max(chordToMoveIndex, targetChordIndex) >= selectedChords.length\r\n      ) {\r\n        return state;\r\n      }\r\n\r\n      const newSelectedChords = [...selectedChords];\r\n      const [chordToMove] = newSelectedChords.splice(chordToMoveIndex, 1);\r\n      newSelectedChords.splice(targetChordIndex, 0, chordToMove);\r\n\r\n      return {\r\n        ...state,\r\n        selectedChords: newSelectedChords,\r\n      };\r\n    }\r\n\r\n    case 'removeChordFromSet': {\r\n      const { chordToRemove } = action;\r\n      const { selectedChords } = state;\r\n      return selectedChords.find((c) => c === chordToRemove)\r\n        ? {\r\n            ...state,\r\n            selectedChords: selectedChords.filter((c) => c !== chordToRemove),\r\n          }\r\n        : state;\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { grommet } from 'grommet/themes';\r\nimport { deepMerge } from 'grommet/utils';\r\n\r\n// https://www.shutterstock.com/blog/art-deco-graphic-design-techniques\r\nconst goldColor = '#d1ad70'; // gold\r\nconst aquamarineColor = '#87ccb0'; // aquamarine\r\n// const turquoiseColor = '#91d4cf'; // light turquoise\r\nconst navyBlueColorColor = '#15173d'; // navy blue\r\n\r\nconst theme = deepMerge(grommet, {\r\n  global: {\r\n    colors: {\r\n      background: '#010115', // x-darker navy blue\r\n      'background-back': {\r\n        dark: '#080920', // darker navy blue\r\n        // light: '#EDEDED',\r\n      },\r\n      'background-front': {\r\n        dark: navyBlueColorColor,\r\n        // light: '#FFFFFF',\r\n      },\r\n      'background-contrast': {\r\n        dark: '#3f438a17',\r\n        // light: '#33333310',\r\n      },\r\n\r\n      black: '#00010d', // almost black navy blue\r\n      white: '#fff9ef', // almost white gold\r\n\r\n      brand: aquamarineColor,\r\n      'accent-1': goldColor,\r\n\r\n      border: {\r\n        dark: `${goldColor}80`,\r\n      },\r\n      'border-semi': {\r\n        dark: `${goldColor}40`,\r\n      },\r\n\r\n      'border-brand': {\r\n        dark: `${aquamarineColor}80`,\r\n      },\r\n      'border-brand-semi': {\r\n        dark: `${aquamarineColor}40`,\r\n      },\r\n    },\r\n\r\n    font: {\r\n      family: '\"Josefin Sans\"',\r\n      face:\r\n        \"/* vietnamese */\\n@font-face {\\n  font-family: 'Josefin Sans';\\n  font-style: normal;\\n  font-weight: 400;\\n  src: url(https://fonts.gstatic.com/s/josefinsans/v17/Qw3PZQNVED7rKGKxtqIqX5E-AVSJrOCfjY46_DjQbMlhLzTs.woff2) format('woff2');\\n  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;\\n}\\n/* latin-ext */\\n@font-face {\\n  font-family: 'Josefin Sans';\\n  font-style: normal;\\n  font-weight: 400;\\n  src: url(https://fonts.gstatic.com/s/josefinsans/v17/Qw3PZQNVED7rKGKxtqIqX5E-AVSJrOCfjY46_DjQbMhhLzTs.woff2) format('woff2');\\n  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;\\n}\\n/* latin */\\n@font-face {\\n  font-family: 'Josefin Sans';\\n  font-style: normal;\\n  font-weight: 400;\\n  src: url(https://fonts.gstatic.com/s/josefinsans/v17/Qw3PZQNVED7rKGKxtqIqX5E-AVSJrOCfjY46_DjQbMZhLw.woff2) format('woff2');\\n  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\\n}\\n\" +\r\n        \"/* latin-ext */\\n@font-face {\\n  font-family: 'Limelight';\\n  font-style: normal;\\n  font-weight: 400;\\n  src: url(https://fonts.gstatic.com/s/limelight/v11/XLYkIZL7aopJVbZJHDuoNOlHnnY.woff2) format('woff2');\\n  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;\\n}\\n/* latin */\\n@font-face {\\n  font-family: 'Limelight';\\n  font-style: normal;\\n  font-weight: 400;\\n  src: url(https://fonts.gstatic.com/s/limelight/v11/XLYkIZL7aopJVbZJHDuoOulH.woff2) format('woff2');\\n  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\\n}\\n\\n/* latin-ext */\\n@font-face {\\n  font-family: 'Limelight';\\n  font-style: normal;\\n  font-weight: 400;\\n  src: url(https://fonts.gstatic.com/s/limelight/v11/XLYkIZL7aopJVbZJHDuoNOlHnnY.woff2) format('woff2');\\n  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;\\n}\\n/* latin */\\n@font-face {\\n  font-family: 'Limelight';\\n  font-style: normal;\\n  font-weight: 400;\\n  src: url(https://fonts.gstatic.com/s/limelight/v11/XLYkIZL7aopJVbZJHDuoOulH.woff2) format('woff2');\\n  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\\n}\\n\",\r\n    },\r\n  },\r\n\r\n  heading: {\r\n    font: {\r\n      family: '\"Limelight\"',\r\n    },\r\n  },\r\n\r\n  button: {\r\n    border: {\r\n      radius: '3px',\r\n    },\r\n  },\r\n\r\n  card: {\r\n    container: {\r\n      border: 'solid',\r\n      round: 'xxsmall',\r\n      elevation: null,\r\n    },\r\n  },\r\n});\r\n\r\nexport default theme;\r\n","import {\r\n  Footer,\r\n  Grommet,\r\n  Header,\r\n  Heading,\r\n  Page,\r\n  PageContent,\r\n  Text,\r\n} from 'grommet';\r\nimport { Route, Routes } from 'react-router-dom';\r\nimport Link from './Components/Link';\r\nimport useStoringReducer from './Hooks/useStoringReducer';\r\nimport ChordSetPage from './Pages/ChordSetPage';\r\nimport ChordSetsPage from './Pages/ChordSetsPage';\r\nimport NotFoundPage from './Pages/NotFoundPage';\r\nimport reducer, { initialState, migrateState } from './Store/reducer';\r\nimport theme from './theme';\r\n\r\nimport './App.css';\r\n\r\nconst applicationStateStorageKey = 'applicationState';\r\n\r\nfunction App() {\r\n  const [state, dispatch] = useStoringReducer(\r\n    applicationStateStorageKey,\r\n    reducer,\r\n    migrateState,\r\n    initialState,\r\n  );\r\n\r\n  return (\r\n    <Grommet full theme={theme} themeMode=\"dark\">\r\n      <Page kind=\"full\">\r\n        <Header\r\n          pad={{ vertical: 'medium', horizontal: 'large' }}\r\n          background=\"brand\"\r\n          elevation=\"small\"\r\n        >\r\n          <Heading size=\"small\" margin=\"none\">\r\n            <Link to=\"/\">Chord Helper</Link>\r\n          </Heading>\r\n        </Header>\r\n        <PageContent as=\"main\" pad=\"large\" width={{ min: '360px' }}>\r\n          <Routes>\r\n            <Route\r\n              path=\"/\"\r\n              element={<ChordSetsPage state={state} dispatch={dispatch} />}\r\n            ></Route>\r\n            <Route\r\n              path=\"chord-sets/:chordSetId\"\r\n              element={<ChordSetPage state={state} dispatch={dispatch} />}\r\n            />\r\n            <Route path=\"*\" element={<NotFoundPage />} />\r\n          </Routes>\r\n        </PageContent>\r\n        <Footer\r\n          pad={{ vertical: 'small', horizontal: 'large' }}\r\n          background=\"black\"\r\n          justify=\"center\"\r\n        >\r\n          <Text color=\"text-xweak\">Helping you with chords since 2021.</Text>\r\n        </Footer>\r\n      </Page>\r\n    </Grommet>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import type { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport App from './App';\r\nimport './index.css';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter basename=\"chord-helper\">\r\n      <DndProvider backend={HTML5Backend}>\r\n        <App />\r\n      </DndProvider>\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}